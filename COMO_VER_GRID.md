# ğŸ¨ GuÃ­a Visual - CÃ³mo Ver el Grid de Videos

## âœ… AplicaciÃ³n Corriendo

La aplicaciÃ³n ya estÃ¡ ejecutÃ¡ndose en: **http://localhost:5140**

---

## ğŸ“‹ Opciones para Ver el Grid

### **OpciÃ³n 1: Interfaz Visual (PÃ¡gina Razor)** ğŸ–¼ï¸

#### Paso 1: Acceder al Sistema
```
http://localhost:5140/Login
```

#### Paso 2: Iniciar SesiÃ³n
- **Usuario**: El que registraste previamente
- **ContraseÃ±a**: Tu contraseÃ±a

#### Paso 3: Navegar al Grid
```
http://localhost:5140/VideoGrid
```

O hacer clic en el menÃº: **"GalerÃ­a de Videos"**

#### Â¿QuÃ© verÃ¡s?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  Inicio  â”‚  ğŸ“¼ GalerÃ­a de Videos  â”‚  â˜ï¸ Subir Video      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ“Š GalerÃ­a de Videos                                        â”‚
â”‚  Explora los videos disponibles y solicita acceso           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ğŸ” Buscar: [___________]  Estado: [Todos â–¼]    â”‚       â”‚
â”‚  â”‚ ğŸ‘¤ Admin:  [___________]  [ğŸ” Buscar]          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   10    â”‚  â”‚    5    â”‚  â”‚    2    â”‚  â”‚    3    â”‚       â”‚
â”‚  â”‚ Totales â”‚  â”‚ Activos â”‚  â”‚Expiradosâ”‚  â”‚Sin Accesoâ”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ ğŸ¬ Video 1 â”‚  â”‚ ğŸ¬ Video 2 â”‚  â”‚ ğŸ¬ Video 3 â”‚           â”‚
â”‚  â”‚ âœ… Activo  â”‚  â”‚ âš ï¸ Expiradoâ”‚  â”‚ ğŸ”’ Bloqueadoâ”‚           â”‚
â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚           â”‚
â”‚  â”‚ ğŸ“Š 15.2 MB â”‚  â”‚ ğŸ“Š 8.5 MB  â”‚  â”‚ ğŸ“Š 22.1 MB â”‚           â”‚
â”‚  â”‚ â±ï¸ 05:30   â”‚  â”‚ â±ï¸ 03:15   â”‚  â”‚ â±ï¸ 10:45   â”‚           â”‚
â”‚  â”‚ ğŸ” ChaCha20â”‚  â”‚ ğŸ” ChaCha20â”‚  â”‚ ğŸ” ChaCha20â”‚           â”‚
â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚           â”‚
â”‚  â”‚ [ğŸ”‘ Claves]â”‚  â”‚ [âš ï¸ ExpirÃ³]â”‚  â”‚ [ğŸ”’ Bloqueado]         â”‚
â”‚  â”‚ [â–¶ï¸ Ver]   â”‚  â”‚            â”‚  â”‚            â”‚           â”‚
â”‚  â”‚ [â„¹ï¸ Info]  â”‚  â”‚ [â„¹ï¸ Info]  â”‚  â”‚ [â„¹ï¸ Info]  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **OpciÃ³n 2: API REST (Swagger UI)** ğŸ”§

#### Paso 1: Acceder a Swagger
```
http://localhost:5140/swagger
```

#### Paso 2: Autenticarse

1. **Expandir** `POST /api/auth/login`
2. **Clic** en "Try it out"
3. **Ingresar** credenciales:
```json
{
  "nombreUsuario": "tu_usuario",
  "contraseÃ±a": "tu_contraseÃ±a"
}
```
4. **Copiar** el token JWT de la respuesta
5. **Clic** en el botÃ³n "ğŸ”“ Authorize" (arriba a la derecha)
6. **Pegar** el token: `Bearer TU_TOKEN_AQUI`
7. **Clic** en "Authorize"

#### Paso 3: Probar Endpoints del Grid

##### **A. Ver Todos los Videos**
```
GET /api/videogrid
```
- Clic en "Try it out"
- Clic en "Execute"
- Ver la respuesta JSON con todos los videos

##### **B. Buscar con Filtros**
```
GET /api/videogrid/search
```
ParÃ¡metros opcionales:
- `searchTerm`: Buscar por tÃ­tulo (ej: "tutorial")
- `administrador`: Filtrar por admin (ej: "admin1")
- `soloConPermiso`: Solo videos con acceso (true/false)

##### **C. Ver un Video EspecÃ­fico**
```
GET /api/videogrid/{videoId}
```
- Reemplazar `{videoId}` con un ID real (ej: 1)

---

## ğŸ“Š Respuesta JSON de Ejemplo

```json
{
  "success": true,
  "message": "Videos obtenidos exitosamente",
  "data": [
    {
      "idVideo": 1,
      "tituloVideo": "Tutorial de CriptografÃ­a",
      "descripcion": "IntroducciÃ³n a ChaCha20-Poly1305",
      "tamaÃ±oArchivo": 15728640,
      "tamaÃ±oArchivoFormateado": "15.0 MB",
      "duracion": 330,
      "duracionFormateada": "05:30",
      "formatoVideo": "mp4",
      "fechaSubida": "2024-11-20T10:30:00Z",
      "nombreAdministrador": "admin1",
      "algoritmoCifrado": "ChaCha20-Poly1305",
      "tienePermiso": true,
      "idPermiso": 42,
      "tipoPermiso": "Lectura",
      "fechaOtorgamiento": "2024-11-15T08:00:00Z",
      "fechaExpiracion": null,
      "numeroAccesos": 5,
      "ultimoAcceso": "2024-11-24T14:20:00Z",
      "permiteVisualizacion": true,
      "estadoPermiso": "Activo"
    },
    {
      "idVideo": 2,
      "tituloVideo": "Video de Prueba",
      "descripcion": "Demo",
      "tamaÃ±oArchivo": 8912896,
      "tamaÃ±oArchivoFormateado": "8.5 MB",
      "duracion": 195,
      "duracionFormateada": "03:15",
      "formatoVideo": "mp4",
      "fechaSubida": "2024-11-22T15:45:00Z",
      "nombreAdministrador": "admin2",
      "algoritmoCifrado": "ChaCha20-Poly1305",
      "tienePermiso": true,
      "idPermiso": 43,
      "tipoPermiso": "Temporal",
      "fechaOtorgamiento": "2024-11-20T10:00:00Z",
      "fechaExpiracion": "2024-11-23T10:00:00Z",
      "numeroAccesos": 2,
      "ultimoAcceso": "2024-11-22T18:00:00Z",
      "permiteVisualizacion": false,
      "estadoPermiso": "Expirado"
    },
    {
      "idVideo": 3,
      "tituloVideo": "Video Privado",
      "descripcion": "Solo para admins",
      "tamaÃ±oArchivo": 23068672,
      "tamaÃ±oArchivoFormateado": "22.0 MB",
      "duracion": 645,
      "duracionFormateada": "10:45",
      "formatoVideo": "mp4",
      "fechaSubida": "2024-11-18T09:00:00Z",
      "nombreAdministrador": "admin3",
      "algoritmoCifrado": "ChaCha20-Poly1305",
      "tienePermiso": false,
      "idPermiso": null,
      "tipoPermiso": null,
      "fechaOtorgamiento": null,
      "fechaExpiracion": null,
      "numeroAccesos": 0,
      "ultimoAcceso": null,
      "permiteVisualizacion": false,
      "estadoPermiso": "Sin Permiso"
    }
  ]
}
```

---

## ğŸ¯ Funcionalidades del Grid

### **1. Filtros Avanzados** ğŸ”
- âœ… **Buscar por tÃ­tulo**: Encuentra videos por nombre
- âœ… **Filtrar por administrador**: Ve videos de un admin especÃ­fico
- âœ… **Filtrar por estado**:
  - `Activo`: Videos con permiso vÃ¡lido
  - `Expirado`: Permisos caducados
  - `Sin Permiso`: Videos bloqueados

### **2. InformaciÃ³n Visual** ğŸ“Š
Cada tarjeta muestra:
- ğŸ¬ **TÃ­tulo del video**
- ğŸ‘¤ **Administrador propietario**
- ğŸ’¾ **TamaÃ±o formateado** (15.2 MB, 8.5 MB, etc.)
- â±ï¸ **DuraciÃ³n formateada** (05:30, 03:15, etc.)
- ğŸ” **Algoritmo de cifrado** (ChaCha20-Poly1305)
- ğŸ“… **Fecha de subida**
- âœ…/âš ï¸/ğŸ”’ **Badge de estado**

### **3. InformaciÃ³n de Permisos** ğŸ”‘
Si tienes permiso:
- âœ… Fecha en que te otorgaron el acceso
- â° Fecha de expiraciÃ³n (si es temporal)
- ğŸ‘ï¸ NÃºmero de visualizaciones

### **4. Acciones Disponibles** âš¡
- **ğŸ”‘ Solicitar Claves**: ObtÃ©n las claves criptogrÃ¡ficas
- **â–¶ï¸ Ver Video**: Reproducir (pendiente Entregable 3)
- **â„¹ï¸ Ver Detalles**: Modal con informaciÃ³n completa

### **5. EstadÃ­sticas en Tiempo Real** ğŸ“ˆ
- ğŸ“Š **Total de videos** en el sistema
- âœ… **Videos con acceso activo**
- âš ï¸ **Permisos expirados**
- ğŸ”’ **Videos sin permiso**

---

## ğŸ¨ CaracterÃ­sticas Visuales

### **Colores por Estado**
```
âœ… Verde  (Activo)      â†’ Badge verde, botones habilitados
âš ï¸ Amarillo (Expirado)  â†’ Badge amarillo, botÃ³n de renovaciÃ³n
ğŸ”’ Rojo (Sin Permiso)   â†’ Badge rojo, botones bloqueados
```

### **Efectos Interactivos**
- ğŸ¯ **Hover**: Las tarjetas se elevan al pasar el mouse
- ğŸ¬ **AnimaciÃ³n**: Iconos de play aumentan al hover
- ğŸŒˆ **Gradientes**: Fondo degradado profesional
- ğŸ’« **Shadows**: Sombras suaves para profundidad

---

## ğŸ§ª Casos de Prueba

### **Test 1: Ver Grid Completo**
```
1. Ir a http://localhost:5140/VideoGrid
2. Verificar que se muestran todos los videos
3. Verificar estadÃ­sticas en la parte superior
```

### **Test 2: Buscar Videos**
```
1. Escribir en el campo "Buscar": "tutorial"
2. Clic en "Buscar"
3. Verificar que solo aparecen videos con "tutorial"
```

### **Test 3: Filtrar por Estado**
```
1. Seleccionar "Activo" en el dropdown de Estado
2. Clic en "Buscar"
3. Verificar que solo aparecen videos con badge verde
```

### **Test 4: Ver Detalles**
```
1. Clic en "Ver Detalles" de cualquier video
2. Se abre modal con informaciÃ³n completa
3. Verificar datos tÃ©cnicos y de seguridad
```

### **Test 5: Solicitar Claves**
```
1. En un video con badge "Activo"
2. Clic en "Solicitar Claves"
3. Se descarga JSON con claves cifradas
```

---

## ğŸš€ PrÃ³ximos Pasos (Entregable 3)

Cuando hagas clic en **"Ver Video"** actualmente muestra un alert porque falta implementar:

```
ğŸ“Œ MÃ³dulo de Descarga/Streaming (Pendiente)
â”œâ”€â”€ DownloadController.cs    â†’ Endpoints de descarga
â”œâ”€â”€ StreamingService.cs       â†’ Streaming por chunks
â”œâ”€â”€ VideoPlayer.cshtml        â†’ Reproductor con Web Crypto API
â””â”€â”€ DecryptionHelper.cs       â†’ Descifrado en cliente
```

---

## ğŸ“ SoluciÃ³n de Problemas

### âŒ No veo videos en el grid
**SoluciÃ³n**: Verifica que haya videos en la base de datos
```sql
SELECT * FROM Videos WHERE EstadoProcesamiento = 'Disponible'
```

### âŒ Error 401 (Unauthorized)
**SoluciÃ³n**: Tu sesiÃ³n expirÃ³, vuelve a iniciar sesiÃ³n

### âŒ No puedo solicitar claves
**SoluciÃ³n**: Necesitas tener un permiso activo para ese video

### âŒ Filtros no funcionan
**SoluciÃ³n**: Verifica que el backend estÃ© corriendo en puerto 5140

---

## âœ… Checklist de VerificaciÃ³n

```
â˜ AplicaciÃ³n corriendo en http://localhost:5140
â˜ Puedo acceder a /VideoGrid
â˜ Se muestran las tarjetas de videos
â˜ Los badges de estado son correctos
â˜ Los filtros funcionan
â˜ El modal de detalles se abre
â˜ Puedo solicitar claves (si tengo permiso)
â˜ Las estadÃ­sticas son precisas
â˜ Los tamaÃ±os estÃ¡n formateados (MB, GB)
â˜ Las duraciones estÃ¡n formateadas (MM:SS)
```

---

## ğŸ“ Conceptos Demostrados

### **Backend**
- âœ… Clean Architecture (Servicios, Controllers, DTOs)
- âœ… LINQ con Entity Framework Core
- âœ… Joins complejos (Videos + Permisos)
- âœ… Filtros dinÃ¡micos
- âœ… Formateo de datos

### **Frontend**
- âœ… Razor Pages con C#
- âœ… Bootstrap 5 responsive
- âœ… JavaScript async/await
- âœ… Fetch API
- âœ… Modales dinÃ¡micos
- âœ… Iconos Bootstrap Icons

### **Seguridad**
- âœ… AutenticaciÃ³n JWT
- âœ… AutorizaciÃ³n basada en permisos
- âœ… ValidaciÃ³n de estados (Activo/Expirado)
- âœ… AuditorÃ­a de accesos

---

**Â¡Disfruta explorando el Grid de Videos!** ğŸ‰

Para mÃ¡s detalles tÃ©cnicos, consulta:
- `ENTREGABLE_2.md` - DocumentaciÃ³n completa
- `PRUEBAS_ENTREGABLE_2.md` - GuÃ­a de pruebas detallada
- `ARQUITECTURA.md` - Diagramas del sistema
